cmake_minimum_required(VERSION 3.20)
project({{ module_name }} LANGUAGES CXX)

find_package(Python COMPONENTS Development.Module REQUIRED)
find_package(pybind11 CONFIG REQUIRED)

set(SOC_WORD_BYTES {{ options.word_bytes }})
set(SOC_LITTLE_ENDIAN {{ 'ON' if options.little_endian else 'OFF' }})

pybind11_add_module({{ module_name }}
    soc_module.cpp
    master.cpp
    reg_model.cpp)

target_include_directories({{ module_name }} PRIVATE ${PROJECT_SOURCE_DIR})

target_compile_features({{ module_name }} PRIVATE cxx_std_17)

target_compile_definitions({{ module_name }} PRIVATE
    SOC_WORD_BYTES=${SOC_WORD_BYTES}
    SOC_LITTLE_ENDIAN=$<IF:${SOC_LITTLE_ENDIAN},1,0>)
